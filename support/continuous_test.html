<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
    <title>AMUSE Testing</title>
  
<script type="text/javascript">

function handle_last_report(report) {
    if(!report) {
        return;
    }
    //'errors', 'failures', 'tests' , 'start_time', 'end_time', 'skipped', 'problem_text']:
    $('#number-of-errors').text(report.errors);
    $('#number-of-failures').text(report.failures);
    $('#number-of-skips').text(report.skipped);
    startDate = new Date(report.start_time * 1000);
    endDate = new Date(report.end_time * 1000);
    $('#start-date').text(startDate.toLocaleString());
    $('#end-date').text(endDate.toLocaleString());
    
    delta_time = report.end_time - report.start_time;
    
    $('#delta-time').text(delta_time.toFixed(3));
    $('#number-of-tests').text(report.tests);
}

function startPage() {
     $.getJSON("/get_last_report", handle_last_report);
}

$(document).ready(startPage);
  
</script>
<style  type="text/css"> 
 
</style>
</head>
<body>
<h1>Last test report</h1>
<ul>
 <li>started on: <span id="start-date"></span></li>
 <li>finished on: <span id="end-date"></span></li>
 <li>total time: <span id="delta-time">0.0</span> seconds</li>
 <li>number of tests run: <span id="number-of-tests"></span></li>
 <li>number of tests errored: <span id="number-of-errors"></span></li>
 <li>number of tests failed: <span id="number-of-failures"></span></li>
 <li>number of tests skipped: <span id="number-of-skips"></span></li>
</ul>
</body>
</html>
